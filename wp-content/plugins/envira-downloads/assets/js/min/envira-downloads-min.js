function envira_downloads_get_cookie(a){for(var e=a+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}function envira_downloads_getParameterByName(a,e){e||(e=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),r=n.exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}jQuery(document).ready(function($){$(document).on("click",".envira-download-button a",function(a){if(a.preventDefault(),$(this).closest(".envira-gallery-wrap").hasClass("envira-dynamic-gallery"))var e="dynamic",n=$(this).attr("href"),r="true";else if($(this).closest(".envirabox-wrap").hasClass("envira-dynamic-gallery")){var i=$("img.envirabox-image").attr("src"),o=$(this).parent().attr("data-envira-downloads-force-download"),e=$("img.envirabox-image").data("envira-gallery-id"),t=$("img.envirabox-image").data("envira-item-id"),r="true";n="1"==o?location.protocol+"//"+location.host+location.pathname+"?envira-downloads-gallery-id="+e+"&envira-downloads-gallery-image="+t+"&envira-dynamic=1":i}else if("block"==$(".envirabox-overlay").css("display")){var i=$("img.envirabox-image").attr("src"),o=$(this).parent().attr("data-envira-downloads-force-download"),e=$("img.envirabox-image").data("envira-gallery-id"),t=$("img.envirabox-image").data("envira-item-id");n="1"==o?location.protocol+"//"+location.host+location.pathname+"?envira-downloads-gallery-id="+e+"&envira-downloads-gallery-image="+t:i}else var n=$(this).attr("href"),e=$(this).closest(".envira-gallery-public").attr("id").split("-")[2];if(envira_downloads.password_protection){if(r)var l=envira_downloads_get_cookie("envira_password_protection_download_dynamic");else var l=envira_downloads_get_cookie("envira_password_protection_download_"+e);if(""==l){var d=prompt(envira_downloads.password_required);if(""==d)return!1}else d=l;if(null==d)return!1;n+="&envira_password_protection_download="+d}return"1"==o?window.open(n,"_self"):window.open(n,"_blank"),!1}),$(document).on("click","a.envira-download-all",function(a){a.preventDefault();var e=$(this).attr("href");if($(this).closest(".envira-gallery-wrap").hasClass("envira-dynamic-gallery"))var n="dynamic",e=$(this).attr("href"),r="true";else{var n=envira_downloads_getParameterByName("envira-downloads-gallery-id",e);if(null==n)return!1}if(envira_downloads.password_protection){var i=envira_downloads_get_cookie("envira_password_protection_download_"+n);if(""==i){var o=prompt(envira_downloads.password_required);if(""==o)return!1}else o=i;if(null==o)return!1;e+="&envira_password_protection_download="+o}return window.open(e,"_self"),!1}),$("div.envira-gallery-wrap").hasClass("envira-lightbox-theme-base_light")||$("div.envira-gallery-wrap").hasClass("envira-lightbox-theme-base_dark")?$("div.envira-download-button",$(this)).fadeIn().css("display","inline-block"):($(document).on("mouseenter","div.envira-gallery-item-inner",function(){$("div.envira-download-button",$(this)).fadeIn().css("display","inline-block")}),$(document).on("mouseleave","div.envira-gallery-item-inner",function(){$("div.envira-download-button",$(this)).hide()}))});